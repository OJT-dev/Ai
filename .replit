modules = ["nodejs-20", "python-3.12:v20-20240117-0bd73cd"]

# Main run commands
run = """
cd life_management_agency
pip install --upgrade pip
pip install -r requirements.txt
npm install
python -m uvicorn agency:app --host 0.0.0.0 --port 80 & npm run dev
"""

# Development environment configuration
[env]
PYTHONPATH = "${PYTHONPATH}:${HOME}"
PORT = "80"
NEXT_PUBLIC_BACKEND_PORT = "80"
NEXT_PUBLIC_API_URL = "http://localhost:80"

# Nix configuration
[nix]
channel = "stable-24_05"

# Configure ports
[[ports]]
localPort = 80
externalPort = 80

[[ports]]
localPort = 3000
externalPort = 3000

# Language configurations
[languages]

[languages.python]
pattern = "**/*.py"
syntax = "python"

[languages.typescript]
pattern = "**/{*.ts,*.tsx}"
syntax = "typescript"

[languages.javascript]
pattern = "**/{*.js,*.jsx}"
syntax = "javascript"
